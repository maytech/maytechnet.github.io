<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="google-translate-customization" content="5417d948061b56ad-a958f0a86e9ce3fc-gb8a4f09ff822561e-1e"></meta>
    <title>Source: maytech-api.js</title>
    <meta name="description" content="Maytech API" />
    <meta name="keywords" content="Maytech API" />
    <meta name="keyword" content="Maytech API" />
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <script src="scripts/jquery.min.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/maytech.css">
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">Maytech API</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="API">
            <span class="title">
                <a href="API.html">API</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="API#accountInfo"><a href="API.html#accountInfo">accountInfo</a></li>
            
                <li data-name="API#accountProfile"><a href="API.html#accountProfile">accountProfile</a></li>
            
                <li data-name="API#createContact"><a href="API.html#createContact">createContact</a></li>
            
                <li data-name="API#createKey"><a href="API.html#createKey">createKey</a></li>
            
                <li data-name="API#defaultAccountLang"><a href="API.html#defaultAccountLang">defaultAccountLang</a></li>
            
                <li data-name="API#deleteContact"><a href="API.html#deleteContact">deleteContact</a></li>
            
                <li data-name="API#deleteKey"><a href="API.html#deleteKey">deleteKey</a></li>
            
                <li data-name="API#disableUserShare"><a href="API.html#disableUserShare">disableUserShare</a></li>
            
                <li data-name="API#downloadPageMeta"><a href="API.html#downloadPageMeta">downloadPageMeta</a></li>
            
                <li data-name="API#editIshare"><a href="API.html#editIshare">editIshare</a></li>
            
                <li data-name="API#enableUserShare"><a href="API.html#enableUserShare">enableUserShare</a></li>
            
                <li data-name="API#filecmdCopy"><a href="API.html#filecmdCopy">filecmdCopy</a></li>
            
                <li data-name="API#filecmdDelete"><a href="API.html#filecmdDelete">filecmdDelete</a></li>
            
                <li data-name="API#filecmdMakedir"><a href="API.html#filecmdMakedir">filecmdMakedir</a></li>
            
                <li data-name="API#filecmdMove"><a href="API.html#filecmdMove">filecmdMove</a></li>
            
                <li data-name="API#filecmdRename"><a href="API.html#filecmdRename">filecmdRename</a></li>
            
                <li data-name="API#finalizeChunkedUpload"><a href="API.html#finalizeChunkedUpload">finalizeChunkedUpload</a></li>
            
                <li data-name="API#getAccountLogoUploadLink"><a href="API.html#getAccountLogoUploadLink">getAccountLogoUploadLink</a></li>
            
                <li data-name="API#getAllKeys"><a href="API.html#getAllKeys">getAllKeys</a></li>
            
                <li data-name="API#getContacts"><a href="API.html#getContacts">getContacts</a></li>
            
                <li data-name="API#getDownloadAllFilesLink"><a href="API.html#getDownloadAllFilesLink">getDownloadAllFilesLink</a></li>
            
                <li data-name="API#getDownloadFilesLink"><a href="API.html#getDownloadFilesLink">getDownloadFilesLink</a></li>
            
                <li data-name="API#getDownloadLink"><a href="API.html#getDownloadLink">getDownloadLink</a></li>
            
                <li data-name="API#getFilesData"><a href="API.html#getFilesData">getFilesData</a></li>
            
                <li data-name="API#getKeyMetadata"><a href="API.html#getKeyMetadata">getKeyMetadata</a></li>
            
                <li data-name="API#getRecipients"><a href="API.html#getRecipients">getRecipients</a></li>
            
                <li data-name="API#getTracking"><a href="API.html#getTracking">getTracking</a></li>
            
                <li data-name="API#getTrackingDaily"><a href="API.html#getTrackingDaily">getTrackingDaily</a></li>
            
                <li data-name="API#getTrackingFiles"><a href="API.html#getTrackingFiles">getTrackingFiles</a></li>
            
                <li data-name="API#getUploadLink"><a href="API.html#getUploadLink">getUploadLink</a></li>
            
                <li data-name="API#getUserKeys"><a href="API.html#getUserKeys">getUserKeys</a></li>
            
                <li data-name="API#getUsers"><a href="API.html#getUsers">getUsers</a></li>
            
                <li data-name="API#getUsersKeys"><a href="API.html#getUsersKeys">getUsersKeys</a></li>
            
                <li data-name="API#instantShareAction"><a href="API.html#instantShareAction">instantShareAction</a></li>
            
                <li data-name="API#instantShareMetadata"><a href="API.html#instantShareMetadata">instantShareMetadata</a></li>
            
                <li data-name="API#ishareMetadata"><a href="API.html#ishareMetadata">ishareMetadata</a></li>
            
                <li data-name="API#keepAlive"><a href="API.html#keepAlive">keepAlive</a></li>
            
                <li data-name="API#keyRequestMetadata"><a href="API.html#keyRequestMetadata">keyRequestMetadata</a></li>
            
                <li data-name="API#listFiles"><a href="API.html#listFiles">listFiles</a></li>
            
                <li data-name="API#loginKeyRequest"><a href="API.html#loginKeyRequest">loginKeyRequest</a></li>
            
                <li data-name="API#loginReturnFiles"><a href="API.html#loginReturnFiles">loginReturnFiles</a></li>
            
                <li data-name="API#logout"><a href="API.html#logout">logout</a></li>
            
                <li data-name="API#metadata"><a href="API.html#metadata">metadata</a></li>
            
                <li data-name="API#mqReq"><a href="API.html#mqReq">mqReq</a></li>
            
                <li data-name="API#onApiError"><a href="API.html#onApiError">onApiError</a></li>
            
                <li data-name="API#passwordResetMetadata"><a href="API.html#passwordResetMetadata">passwordResetMetadata</a></li>
            
                <li data-name="API#previewFile"><a href="API.html#previewFile">previewFile</a></li>
            
                <li data-name="API#readUserContact"><a href="API.html#readUserContact">readUserContact</a></li>
            
                <li data-name="API#requestContactKey"><a href="API.html#requestContactKey">requestContactKey</a></li>
            
                <li data-name="API#requestFiles"><a href="API.html#requestFiles">requestFiles</a></li>
            
                <li data-name="API#requestLanguageList"><a href="API.html#requestLanguageList">requestLanguageList</a></li>
            
                <li data-name="API#requestLoginKey"><a href="API.html#requestLoginKey">requestLoginKey</a></li>
            
                <li data-name="API#requestPasswordReset"><a href="API.html#requestPasswordReset">requestPasswordReset</a></li>
            
                <li data-name="API#requesttoken"><a href="API.html#requesttoken">requesttoken</a></li>
            
                <li data-name="API#returnFilesAction"><a href="API.html#returnFilesAction">returnFilesAction</a></li>
            
                <li data-name="API#returnFilesMetadata"><a href="API.html#returnFilesMetadata">returnFilesMetadata</a></li>
            
                <li data-name="API#saveResetPswd"><a href="API.html#saveResetPswd">saveResetPswd</a></li>
            
                <li data-name="API#sendKeys"><a href="API.html#sendKeys">sendKeys</a></li>
            
                <li data-name="API#sendRequest"><a href="API.html#sendRequest">sendRequest</a></li>
            
                <li data-name="API#setRequestFunction"><a href="API.html#setRequestFunction">setRequestFunction</a></li>
            
                <li data-name="API#updateAccountProfile"><a href="API.html#updateAccountProfile">updateAccountProfile</a></li>
            
                <li data-name="API#updateContact"><a href="API.html#updateContact">updateContact</a></li>
            
                <li data-name="API#updateKey"><a href="API.html#updateKey">updateKey</a></li>
            
                <li data-name="API#userCreate"><a href="API.html#userCreate">userCreate</a></li>
            
                <li data-name="API#userDelete"><a href="API.html#userDelete">userDelete</a></li>
            
                <li data-name="API#userEdit"><a href="API.html#userEdit">userEdit</a></li>
            
                <li data-name="API#userMetadata"><a href="API.html#userMetadata">userMetadata</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="maytech-api.js.html">Source: maytech-api.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/** @namespace API */


(function (root, factory) {
  var CryptoJS = root.CryptoJS || root.Crypto;
  if (typeof exports === 'object') {
    CryptoJS = CryptoJS || require("Crypto");
    module.exports = factory(CryptoJS);
  } else if (typeof define === 'function' &amp;&amp; define.amd) {
    define(function () {
      return factory(CryptoJS);
    });
  } else {
    root.maytech_api = factory(CryptoJS);
  }
})(this, function (Crypto) {

  if (typeof Crypto === 'undefined') {
    throw new Error('maytech api requires Crypto lib');
  }

  return function (host, proto) {

    if (typeof Crypto.PBKDF2 === 'undefined') {
      throw new Error('maytech api requires Crypto PBKDF2');
    }

    /**
     * This callback handles errors from API
     * @memberof API
     * @instance
     * @method onApiError
     * @return something
     */
    this.onApiError = function (args, xhr) {
      return;
    };

    proto = proto || 'https:';
    host = host || 'api.maytech.net';

    var self = this,
      salt    = '',
      url     = proto + '//' + host,
      api_url = url + '/api/0.1',
      pbkdf   = undefined,
      login   = undefined,
      token   = undefined,
      timeout = 0;

    function utf8_to_bytes(str) {
      return unescape(encodeURIComponent(str));
    }

    function bytes_to_utf8(str) {
      return decodeURIComponent(escape(str));
    }

    function _cryptString(str) {
      var bytes = '', 
        i, l;
      str = utf8_to_bytes(str);

      for(i = 0, l = str.length; i &lt; l; ++i){
        bytes += String.fromCharCode(pbkdf.charCodeAt( i % pbkdf.length ) ^ str.charCodeAt( i ))
      }
      return (window.btoa || base64.encode)(bytes);
    }

    // Decrypt string by XORing input base64 string to password PBKDF
    function decodeString(str) {
      var bytes = (window.atob || base64.decode)(str);
      var res = '';
      for (var i=0; i &lt; bytes.length; ++i) {
        res += String.fromCharCode(pbkdf.charCodeAt(i % pbkdf.length) ^ bytes.charCodeAt(i));
      }
      return bytes_to_utf8(res);
    }

    this.decodeString = decodeString;

    function _genPbkdf( passwd,cb ){
      var _pbkdf2 = '';
      if ( typeof navigator !== 'undefined' &amp;&amp;
        navigator.userAgent.toLowerCase().match(/(msie) ([\w.]+)/) ){
        _pbkdf2 = _pbkdf2Async( passwd, salt, 32, {
          iterations: 4096
        }, function( _pbkdf2 ) {
          pbkdf = _pbkdf2;
          cb();
        },function( percent ){});
      } else {
        _pbkdf2 = Crypto.PBKDF2( passwd, salt, 32, {
          iterations: 4096
        } );
        pbkdf = _pbkdf2;
        cb();
      }

      return true;
    }

    function _pbkdf2Async( password, salt, keylen, options, callback, progress ){
      var util = Crypto.util,
      charenc = Crypto.charenc,
      UTF8 = charenc.UTF8,
      Binary = charenc.Binary;

      // Convert to byte arrays
      if ( password.constructor == String ) password = UTF8.stringToBytes( password );
      if ( salt.constructor == String ) salt = UTF8.stringToBytes( salt );
      /* else, assume byte arrays already */

      // Defaults
      var hasher = options &amp;&amp; options.hasher || Crypto.SHA1,
      iterations = options &amp;&amp; options.iterations || 1;

      // Pseudo-random function
      function PRF( password, salt ) {
        return Crypto.HMAC( hasher, salt, password, {
          asBytes: true
        } );
      }

      var nextTick = Crypto.nextTick;

      // Generate key
      var derivedKeyBytes = [],
      blockindex = 1;

      var outer, inner;
      nextTick(
        outer = function () {
          if ( derivedKeyBytes.length &lt; keylen ) {
            if ( progress ) {
              progress( derivedKeyBytes.length / keylen * 100 | 0 );
            }
            var block = PRF( password, salt.concat( util.wordsToBytes( [blockindex] ) ) );
            var u = block, i = 1, step = 1, iterationsPerStep = 512;
            nextTick( 

              inner = function () {
                if ( i &lt; iterations ) {
                  while( i &lt; iterationsPerStep * step ){
                    u = PRF( password, u );
                    for ( var j = 0; j &lt; block.length; j++ ) block[j] ^= u[j];
                      i++;
                  }
                  step++;
                  nextTick( inner );
                } else {
                  derivedKeyBytes = derivedKeyBytes.concat( block );
                  blockindex++;
                  nextTick( outer );
                }
              } );
          } else {
            if ( progress ) {
              progress( 100 );
            }
          // Truncate excess bytes
          derivedKeyBytes.length = keylen;
          callback(
            options &amp;&amp; options.asBytes ? derivedKeyBytes :
            options &amp;&amp; options.asString ? Binary.bytesToString( derivedKeyBytes )  :
            util.bytesToHex( derivedKeyBytes )) ;
        }
      });
    }

    var _requestFunction = function( url, method, headers, data, callback ){
      if( typeof jQuery == 'undefined' )
        throw new Error( 'requestFunction require jQuery. For overload it, use api.setRequestFunction()' );
      var options = {
        url: url,
        type: method,
        data: data,
        beforeSend: function( xhr, params ){
          if (typeof headers !== 'undefined') {
            for (var key in headers) {
              if (headers.hasOwnProperty(key)) {
                xhr.setRequestHeader(key, headers[key]);  
              }
            }
          }
        },
        complete: function( xhr, status ){
          callback( xhr );
        }
      };

      if (method === 'POST') {
        options.contentType = 'application/json; charset=UTF-8';
        options.data = JSON.stringify(options.data);
      }
      return jQuery.ajax(options);
    };

    /**
     * Sets API request function which forms HTTP request
     * @memberof API
     * @instance
     * @method setRequestFunction
     * @param {function} fn form function
     * @return somethingoldRequsetFunction
     */
    this.setRequestFunction = function( fn ){
      var oldRequsetFunction = _requestFunction;
      _requestFunction = fn;
      return oldRequsetFunction;
    };

    function prepareRequest(args) {
      var timestamp = new Date().getTime();
      var request = {};
      request.headers = typeof args.headers != 'undefined' ? args.headers : {};
      request.data = typeof args.data != 'undefined' ? args.data : {};
      request.method = typeof args.method != 'undefined' ? args.method : "GET";
      if (args.url.indexOf('?') == -1) {
        request.url = args.url + '?_=' + timestamp;// Prevent cache API requests in browsers
      } else {
        request.url = args.url + '&amp;_=' + timestamp;// Prevent cache API requests in browsers
      }
      

      request.headers['X-Auth-Timestamp'] = timestamp;

      if (typeof token != 'undefined') {
        request.headers['X-Auth-Token'] = token;
      }


      if (typeof pbkdf != 'undefined') {
        request.headers['authorization'] = getAuthorization(request.method, request.url, timestamp, request.headers);
      }

      request.url = api_url + request.url;

      return request;
    }

    function prepareUrl(path, method, headers) {
      method = method || "GET";
      var timestamp = new Date().getTime();
      var authorization = getAuthorization(method, path, timestamp, headers);
      var params = "authorization="+authorization+"&amp;X-Auth-Token="+token+"&amp;X-Auth-Timestamp="+timestamp;
      return api_url + path + "?" + params;
    }

    function getAuthorization(method, url, timestamp, headers) {
      headers = headers || {};
      if (typeof token != 'undefined') {
        headers['X-Auth-Token'] = token;
      }
      headers['X-Auth-Timestamp'] = timestamp;
      var str = method + " " + url.split("?")[0] + (function(){
        var str = "\n";
        var keys = [] ;

        for (var key in headers) {
          keys.push(key);
        }
        for (var i=0, l = keys.sort().length; i &lt; l; i++) {
          key = keys[i];
          str += key.toLowerCase() + ': ' + headers[key] + "\n";
        }
        return str;
      }());
      return Crypto.HMAC(Crypto.SHA1, str, pbkdf);
    }

    this.prepareUrl = prepareUrl;

    this.getAuthorization = getAuthorization;

    this.prepareRequest = prepareRequest;

    function _request(args) {
      var request = prepareRequest(args);

      return _requestFunction(request.url, request.method, request.headers, request.data, function (xhr) {
        self.onApiCall &amp;&amp; self.onApiCall(args, xhr);

        if (xhr.getResponseHeader('X-Auth-Token')) {
          token = xhr.getResponseHeader('X-Auth-Token');
        }
        
        if (xhr.status >= 400 &amp;&amp; !args.silent) {
          self.onApiError(args, xhr);
        }

        if (typeof args.callback === "function") {
          args.callback(xhr);
        }
      });
    }

    function preparePasswordUrl(password) {
      if (password) {
        password = utf8_to_bytes(password);
        password = (window.btoa || base64.encode)(password);
        password = '?password=' + password;
      } else {
        password = '';
      }
      return password;
    }

    
    this.request = _request;

    /**
     * To perform non-anonymous call on Quatrix API, client application should obtain session token. Additionally every call should be signed with user's password pbkdf2 to form 'authorization' header.
     * Login call accepts user login (email), referer (to differentiate accounts) and authorization token. Authorization token is calculated based on HTTP request method, route URI, login, timestamp and user's password pbkdf2.
     * If login was successful - API returns 200 OK status with X-Auth-Token header containing newly created session token. This session id is than used as variable to calculate authorization token for next API calls that require authorization.
     * Failed login returns 401 HTTP error.
     * @memberof API
     * @instance
     * @method requesttoken
     * @param {string} login plain text
     * @param {string} passwd pbkdf2 user password
     * @param {function} cb callback function
     * @return something
     */

    this.requesttoken = function( login, passwd, cb ){
      // Expire token
      token = undefined;
      _genPbkdf( passwd, function(){
        return _request( {
          method : 'GET',
          headers : {
            'X-Auth-Login' : login
          },
          url : '/session/login',
          callback : cb
        });
      });
    };

    /**
     * Login to return files.
     * @memberof API
     * @instance
     * @method loginReturnFiles
     * @param {string} id quatrix id
     * @param {function} cb callback function
     * @return something
     */

    this.loginReturnFiles = function (id, cb) {
      // Expire token
      token = undefined;
      return _request( {
        method : 'GET',
        url : '/return_files/login/' + id,
        callback: function (xhr) {
          if (xhr.status === 200) {
            pbkdf = xhr.getResponseHeader('X-Auth-Token');
          }
          cb(xhr);
        }
      });
    };

    /**
     * Returns default language for your account. 
     * Example of a response below.
     * @example
     * {
     *  localization: "en_GB"
     * }
     * @memberof API
     * @instance
     * @method defaultAccountLang
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.defaultAccountLang = function(cb){
      return _request({
        method : 'GET',
        url : '/languages/default',
        callback : cb
      });
    };

    /**
     * Returns metadata about specified return_files page.
     * @memberof API
     * @instance
     * @method returnFilesMetadata
     * @param {string} id return_files id
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.returnFilesMetadata = function (id, cb) {
      return _request({
        method : 'GET',
        url : '/return_files/metadata/'+id,
        callback : cb
      });
    };

    /**
     * Sends uploaded files to requestor. 
     * @example
     * {
     *   files: ["12345678-1234-1234-1234-123456789098", "12345678-1234-1234-1234-123456789098"], // id of each uploaded file
     *   id: "example of a good written subject",
     *   message: "example of a good written message",
     * }
     * @memberof API
     * @instance
     * @method returnFilesAction
     * @param {string} id Quatrix id
     * @param {object} data action data. Pattern in example
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.returnFilesAction = function (id, data, cb) {
      return _request({
        method: 'POST',
        url: '/return_files/share/'+id,
        data: data,
        callback: cb
      });
    };

    /**
     * Returns Quatrix metadata.
     * @memberof API
     * @instance
     * @method instantShareMetadata
     * @param {string} id Quatrix id
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.instantShareMetadata = function (id, cb) {
      return _request({
        method : 'GET',
        url : '/is/metadata/'+id,
        callback : cb
      });
    };

    /**
     * Shares files to specified user. 
     * @example
     * {
     *   contacts: ["12345678-1234-1234-1234-123456789098", "12345678-1234-1234-1234-123456789098"], // id of each recipient
     *   files: ["12345678-1234-1234-1234-123456789098", "12345678-1234-1234-1234-123456789098"], // id of each uploaded file
     *   folder: "12345678-1234-1234-1234-123456789098", // id of folder where uploaded files placed
     *   subject: "example of a good written subject",
     *   message: "example of a good written message",
     *   expires: 0,
     *   activates: 0,
     *   password_protected: true,
     *   password: "magicword",
     *   separate_password: opt.separate_password || false, // send password in separate email
     *   return_files: opt.return_files || false, // send request-file page
     *   notify: opt.notify, // norify about downloads
     *   pgp_encrypted: pgp_encryption, // crypted files or not
     *   return_pgp_encrypted: opt.encrypt_incoming, // crypted returned files or not
     *   message_signature: "text which will be placed right after file list"
     * }
     * @memberof API
     * @instance
     * @method instantShareAction
     * @param {string} id instantShare id
     * @param {object} data action data. Pattern in example
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.instantShareAction = function (id, data, cb) {
      if(data.password)
        data.password = _cryptString(data.password);
      return _request({
        method: 'POST',
        url: '/is/share/'+id,
        data: data,
        callback: cb
      });
    };

    /**
     * Generates request-files link for specified user. Check "data" exapmple below.
     * @example
     * {
     *  contact: "0a2d6f5e-4aea-4416-9d32-891afa62eabd" // id of a specified user
     *  return_pgp_encrypted: false
     * }
     * @memberof API
     * @instance
     * @method requestFiles
     * @param {string} id specified user id
     * @param {object} data information about request-files link, which will be generated
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.requestFiles = function (id, data, cb) {
      return _request({
        method : 'POST',
        url : '/is/request_files/'+id,
        data: data,
        callback : cb
      });
    };
    /**
     * Send generated request-files link to specified user. Check "data" exapmple below.
     * @example
     * {
     *  message: "some message"
     * }
     * @memberof API
     * @instance
     * @method sendRequest
     * @param {string} id specified user/contact id
     * @param {object} data metadata for request-files page
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.sendRequest = function (id, data, cb) {
      return _request({
        method : 'POST',
        url : '/is/send_request/'+id,
        data: data,
        callback : cb
      });
    };

    /**
     * Returns metadata about speified folder 
     * @memberof API
     * @instance
     * @method metadata
     * @param {string} resource id of specified folder
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.metadata = function( resource, cb ){

      return _request( {
        method : 'GET',
        url : '/file/metadata/'+resource,
        callback : cb
      } );
    };

    /**
     * Returns download links for specified files. Check "data" example below.
     * @memberof API
     * @example
     * {
     *  ids: ["12345678-1234-1234-123456789098"]
     * }
     * @instance
     * @method getDownloadLink
     * @param {object} data information about files that should be downloaded
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.getDownloadLink = function(data, cb){
      return _request( {
        method : 'POST',
        url : '/file/downloadlink',
        data: data,
        callback : cb
      } );
    };

    /**
     * Returns link for file upload.
     * @memberof API
     * @example
     * {
     *  name: "file.jpg",
     *  parent: "12345678-1234-1234-123456789098", // parent folder id 
     *  upload_type: "multipart"
     * }
     * @instance
     * @method getUploadLink
     * @param {object} data file metadata
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.getUploadLink = function(data, cb){
      
      return _request( {
        method : 'POST',
        url : '/upload/getlink/',
        data: data,
        callback : cb
      } );
    };

    /**
     * Finalize chunked upload.
     * @memberof API
     * @instance
     * @method finalizeChunkedUpload
     * @param {string} id current upload id
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.finalizeChunkedUpload = function(id, cb) {
      return _request({
        method : 'GET',
        url : '/upload/finalize/' + id,
        callback : cb
      });
    };

    /**
     * Initiates copy action of selected files. 
     * @memberof API
     * @instance
     * @method filecmdCopy
     * @param {array} source array with selected files
     * @param {string} target specified folder id
     * @param {integer} overwrite 
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.filecmdCopy = function( source, target, overwrite, cb ){
      var data = {
        ids    : source,
        target : target
      };

      if(typeof overwrite != 'undefined'){
        data.overwrite = overwrite;
      }

      return _request( {
        method : 'POST',
        url : '/file/copy',
        data : data,
        callback : cb
      } );
    };

    /**
     * Renames specified file or folder.
     * @memberof API
     * @instance
     * @method filecmdRename
     * @param {string} id id of specified folder or file
     * @param {string} name new file or folder name
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.filecmdRename = function(id, name, cb){
      return _request( {
        method : 'POST',
        url : '/file/rename',
        data : {
          id: id,
          name: name
        },
        callback : cb
      } );
    };

    /**
     * Initiates remove action of specified items. 
     * @memberof API
     * @instance
     * @method filecmdMove
     * @param {array} source array with ids of selected items
     * @param {string} target id of selected folder
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.filecmdMove = function(source, target, cb){
      return _request( {
        method : 'POST',
        url : '/file/move',
        data : {
          ids: source,
          target: target
        },
        callback : cb
      } );
    };

    /**
     * Creates folder with specified name.
     * @memberof API
     * @instance
     * @method filecmdMakedir
     * @param {string} name new folder name
     * @param {string} parent parent folder id
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.filecmdMakedir = function( name, parent, cb ){
      return _request( {
        method : 'POST',
        data : {
          'name'   : name,
          'target' : parent
        },
        url : '/file/makedir',
        callback : cb
      } );
    };

    /**
     * Deletes specified items.
     * @memberof API
     * @instance
     * @method filecmdDelete
     * @param {array} ids array with specified item ids
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.filecmdDelete = function( ids, cb ){
      return _request( {
        method : 'POST',
        data : {
          'ids' : ids
        },
        url : '/file/delete',
        callback : cb
      } );
    };

    /**
     * Returns user list.
     * @memberof API
     * @instance
     * @method getUsers
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.getUsers = function( cb ){
      return _request( {
        method   : 'GET',
        url      : '/user/get',
        callback : cb
      } );
    };

    /**
     * Returns metadata for specified user
     * @memberof API
     * @instance
     * @method userMetadata
     * @param {string} uuid specified user id
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.userMetadata = function(uuuid , cb){
      return _request({
        method   : 'GET',
        url      : '/user/metadata/' + uuuid,
        callback : cb
      });
    };

    /**
     * Creates user with specified parameters. Check "data" example below.
     * @example
     * {
     *  email: "john@smith.io"
     *  expires: 0
     *  groups: []
     *  home_operations: 191
     *  language: "en_GB"
     *  parent: "12345678-1234-1234-1234-123456789098"
     *  realname: "john smith"
     *  status: "A"
     *  super_admin: "N"
     *  user_operations: 3
     *  users: []
     * }
     * @memberof API
     * @instance
     * @method userCreate
     * @param {} data
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.userCreate = function( data, cb ){
      if(data.password)
        data.password = _cryptString(data.password);
      return _request( {
        method   : 'POST',
        url      : '/user/create/',
        data     : data,
        callback : cb/*,
        silent   : true*/
      } );
    };

    /**
     * Changes information about specified user. Check "data" example below.
     * @example
     * {
     *  email: "john@smith.com"
     *  expires: 0
     *  groups: []
     *  home_operations: 191
     *  language: "en_GB"
     *  parent: "12345678-1234-1234-1234-123456789098"
     *  realname: "john smithy"
     *  status: "A"
     *  super_admin: "N"
     *  user_operations: 3
     *  users: []
     * }
     * @memberof API
     * @instance
     * @method userEdit
     * @param {string} loginid specified user id
     * @param {object} data information about user
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.userEdit = function( loginid, data, cb ){
      if(data.password)
        data.password = _cryptString(data.password);
      return _request( {
        method   : 'POST',
        url      : '/user/edit/'+loginid,
        data     : data,
        callback : cb
      } );
    };

    /**
     * Deletes specified users. Check "data" example below.
     * @example
     * {
     *  ids: ["12345678-1234-1234-1234-123456789098"]
     * }
     * @memberof API
     * @instance
     * @method userDelete
     * @param {object} data information about specified users
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.userDelete = function(data, cb){
      return _request( {
        method   : 'POST',
        url      : '/user/delete',
        data     : data,
        callback : cb
      });
    };

    /**
     * Returns link for logo upload.
     * @memberof API
     * @instance
     * @method getAccountLogoUploadLink
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.getAccountLogoUploadLink = function(cb) {
      return _request({
        method : 'GET',
        url : '/settings/uploadlogolink',
        callback : cb
      });
    };

    /**
     * Returns information about your profile.
     * @memberof API
     * @instance
     * @method accountProfile
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.accountProfile = function( cb ){
      return _request( {
        method   : 'GET',
        url      : '/profile/get',
        callback : cb
      } );
    };

    /**
     * Changes personal profile data. Check "data" example below.
     * @example
     * {
     *  email: "john@smith.net",
     *  language: "",
     *  password: "B1dVCwcU", // crypted password
     *  realname: "john"
     * }
     * @memberof API
     * @instance
     * @method updateAccountProfile
     * @param {object} data new metadata
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.updateAccountProfile = function (data, cb) {
      if(data.password)
        data.password = _cryptString(data.password);
      return _request( {
        method   : 'POST',
        url      : '/profile/set',
        data     : data,
        callback : cb
      } );
    };

    // File preview
    /**
     * Returns preview for specified files.
     * @memberof API
     * @instance
     * @method previewFile
     * @param {string} fuuid file uuid
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.previewFile = function(fuuid, cb) {
      return _request({
        method   : 'GET',
        url      : '/file/preview/' + fuuid,
        callback : cb
      });
    };

    // Recipients
    /**
     * Returns array with users and contacts.
     * @memberof API
     * @instance
     * @method getRecipients
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.getRecipients = function(cb){
      return _request({
        method: 'GET',
        url: '/is/recipients',
        callback: cb
      });
    };

    // Contacts
    /**
     * Returns array of contacts.
     * @memberof API
     * @instance
     * @method getContacts
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.getContacts = function(cb){
      return _request({
        method: 'GET',
        url: '/contact/',
        callback: cb
      });
    };

    /**
     * Creates contact. Check "data" in example bellow.
     * @memberof API
     * @example 
     * {
     *  email: 'hello@world.net',
     *  name : 'mr. Smith'
     * }
     * @instance
     * @method createContact
     * @param {object} data dictionary with contact data
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.createContact = function(data, cb){
      return _request({
        method: 'POST',
        url: '/contact/create',
        data: data,
        callback: cb
      });
    };

    /**
     * Updates existing contact. Check "data" example below.
     * @memberof API
     * @example
     * {
     *  email: 'hello@world.net',
     *  name : 'mr. Smith'
     * }
     * @instance
     * @method updateContact
     * @param {string} cuuid contact uuid
     * @param {object} data dictionary contact data
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.updateContact = function(cuuid, data, cb){
      return _request({
        method: 'POST',
        url: '/contact/edit/' + cuuid,
        data: data,
        callback: cb
      });
    };

    /**
     * Deletes specified contact. 
     * @memberof API
     * @instance
     * @method deleteContact
     * @param {string} cuuid contact uuid
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.deleteContact = function( cuuid, cb){
      return _request({
        method: 'GET',
        url: '/contact/delete' + cuuid,
        callback: cb
      });
    };

    /**
     * Fetch contact of specified user.
     * @memberof API
     * @instance
     * @method readUserContact
     * @param {string} cuuid user uuid
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.readUserContact = function( cuuid, cb){
      return _request({
        method: 'GET',
        url: 'user/contacts/' + cuuid,
        callback: cb
      });
    };

    /**
     * Returns all share actions history.
     * @memberof API
     * @instance
     * @method getTracking
     * @param {string} cuuid iShare uuid
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.getTracking = function(cuuid, cb){
      return _request({
        method: 'GET',
        url: '/is/tracking/' + cuuid,
        callback: cb
      });
    };

    /**
     * Returns all share actions history for specified day.
     * @memberof API
     * @instance
     * @method getTrackingDaily
     * @param {string} cuuid uuid iShare uuid
     * @param {integer} day specified day
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.getTrackingDaily = function(cuuid, day, cb){
      return _request({
        method: 'GET',
        url: '/is/tracking/' + cuuid + '?date=' + day,
        callback: cb
      });
    };

    /**
     * Returns all files for specified action.
     * @memberof API
     * @instance
     * @method getTrackingFiles
     * @param {string} cuuid iShare action
     * @param {string} action_uuid uuid of specified action
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.getTrackingFiles = function(cuuid, action_uuid, cb){
      return _request({
        method: 'GET',
        url: '/is/tracking/' + cuuid + '?action=' + action_uuid,
        callback: cb
      });
    };

    /**
     * Returns data about specified file.
     * @memberof API
     * @instance
     * @method getFilesData
     * @param {string} cuuid iShare uuid
     * @param {string} action_uuid uuid of specified action
     * @param {string} file_uuid uuid of required file
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.getFilesData = function(cuuid, action_uuid, file_uuid, cb){
      return _request({
        method: 'GET',
        url: '/is/tracking/' + cuuid + '?action=' + action_uuid + '&amp;file='+ file_uuid,
        callback: cb
      });
    };

    /**
     * Enables Quatrix for specified user. Check required "data" example.
     * bellow.
     * @memberof API
     * @example
     * {
     *  folder_id: '12345678-1234-1234-123456789098',
     *  name     : 'Title for enabled share'
     * }
     * @instance
     * @method enableUserShare
     * @param {string} user_id id of specified user
     * @param {object} data information about enabled share
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.enableUserShare = function(user_id, data, cb){
      return _request({
        method: 'POST',
        url: '/user/add_ishare/'+user_id,
        data: data,
        callback: cb
      });
    };

    /**
     * Disables Quatrix for specified user.
     * @memberof API
     * @instance
     * @method disableUserShare
     * @param {string} user_id specified user id
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.disableUserShare = function(user_id, cb){
      return _request({
        method: 'GET',
        url: '/user/remove_ishare/'+user_id,
        callback: cb
      });
    };

    /**
     * Changes branding information about Quatrix. Check "data" example bellow.
     * @example
     * {
     *  bcc: ["john@smith.net", "bob@dylan.net"],
     *  email_footer: "good example of email footer",
     *  language: "en_GB"
     * }
     * @memberof API
     * @instance
     * @method editIshare
     * @param {string} user_id specified user id
     * @param {object} data changed branding information
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.editIshare =  function(user_id, data, cb){
      return _request({
        method: 'POST',
        url: '/user/edit_ishare/'+user_id,
        data: data,
        callback: cb
      });
    };

    /**
     * Changes branding data for Quatrix. Check required "data" example.
     * @example
     * {
     *  bcc: ['hidden@ninja.bcc'],
     *  email_footer: "some default email footer",
     *  name: "New Quatrix headin"
     * }
     * @memberof API
     * @instance
     * @method ishareMetadata
     * @param {string} user_id specified user id
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.ishareMetadata = function(user_id, cb){
      return _request({
        method: 'GET',
        url: '/user/ishare_metadata/'+user_id,
        callback: cb
      });
    };

    /**
     * Returns information about your account.
     * Check the illustration of a JSON in example below.
     * @example
     *  {
     *    id              : "123456789-1234-1234-1234-123456789098",
     *    language        : "en_GB",
     *    max_file_size   : "2000000000",
     *    max_files_count : "-1",
     *    plan            : "Quatrix Business",
     *    retention       : "-1",
     *    storage_limit   : 250000000000,
     *    storage_used    : 173784903089,
     *    user_limit      : "250",
     *    user_used       : 18
     *  }
     * @memberof API
     * @instance
     * @method accountInfo
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.accountInfo = function(cb){
      return _request({
        method: 'GET',
        url: '/account/info',
        callback: cb
      });
    };

    // PGP Keys Management
    /**
     * Returns public PGP keys of specified users or contacts.
     * @memberof API
     * @instance
     * @method getUsersKeys
     * @param {array} user_ids array with user or contact id's
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.getUsersKeys = function(user_ids, cb){
      return _request({
        method: 'POST',
        url: '/key/users',
        data: {ids: user_ids},
        callback: cb
      });
    };

    /**
     * Returns private and public PGP keys for specified user.
     * @memberof API
     * @instance
     * @method getUserKeys
     * @param {string} uuid user uuid
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.getUserKeys = function(uuid, cb){
      return _request({
        method: 'GET',
        url: '/user/key/' + uuid,
        callback: cb,
        silent: true
      });
    };

    /**
     * Returns public keys of current user, his subusers and his contacts.
     * @memberof API
     * @instance
     * @method getAllKeys
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.getAllKeys = function(cb){
      return _request({
        method: 'GET',
        url: '/key',
        callback: cb
      });
    };

    /**
     * Returns metadata for specified PGP key. Private key is also returned if request was initiated by owner.
     * @memberof API
     * @instance
     * @method getKeyMetadata
     * @param {string} uuid PGP key uuid
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.getKeyMetadata = function (uuid, cb) {
      return _request({
        method: 'GET',
        url: '/key/metadata/' + uuid,
        callback: cb
      });
    };

    /**
     * Deletes specified PGP key.
     * @memberof API
     * @instance
     * @method deleteKey
     * @param {string} uuid key uuid
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.deleteKey = function (uuid, cb) {
      return _request({
        method: 'GET',
        url: '/key/delete/' + uuid,
        callback: cb
      });
    };

    /**
     * Updates specified private key. Check 'data' example below.
     * @memberof API
     * @example
     * {
     *  name: 'newName',
     *  user: '12345678-1234-1234-123456789098',
     *  public: "", // base64 encoded public value
     *  private: "" // base64 encoded private value
     * }
     * @instance
     * @method updateKey
     * @param {string} uuid key uuid
     * @param {object} data PGP key metadata
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.updateKey = function (uuid, data, cb) {
      return _request({
        method: 'POST',
        url: '/key/edit/' + uuid,
        data: data,
        callback: cb
      });
    };

    /**
     * Creates key for specified user. Check 'data' example below.
     * @memberof API
     * @example
     * {
     *  name: 'newName',
     *  user: '12345678-1234-1234-123456789098',
     *  public: "", // base64 encoded public value
     *  private: "" // base64 encoded private value
     * }
     * @instance
     * @method createKey
     * @param {object} data information about key
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.createKey = function (data, cb) {
      return _request({
        method: 'POST',
        url: '/key/create',
        data: data,
        callback: cb
      });
    };

    /**
     * Returns PGP key for specified contact.
     * @memberof API
     * @instance
     * @method requestContactKey
     * @param {string} uuid contact uuid 
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.requestContactKey = function (uuid, cb){
      return _request({
        method: 'GET',
        url: '/contact/request/'+ uuid,
        callback: cb
      });
    };

    /**
     * Returns PGP key for encrypting password.
     * @memberof API
     * @instance
     * @method requestLoginKey
     * @param {string} uuid contact uuid
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.requestLoginKey = function (uuid, cb){
      return _request({
        method: 'GET',
        url: '/key_request/login/'+ uuid,
        callback: cb
      });
    };

    /**
     * Returns all avaliable languages.
     * @memberof API
     * @instance
     * @method requestLanguageList
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.requestLanguageList = function (cb){
      return _request({
        method: 'GET',
        url: '/languages/',
        callback: cb
      });
    };

    /**
     * Initiate password reset process, if email is correct
     * @memberof API
     * @instance
     * @method requestPasswordReset
     * @param {string} email email for reset process action
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.requestPasswordReset= function(email, cb){
      return _request( {
        method   : 'POST',
        url      : '/user/request_password_reset',
        data     : {email: email},
        callback : cb
      });
    };

    /**
     * Allow you to manage background jobs.
     * @memberof API
     * @instance
     * @method mqReq
     * @param {function} cb callback function
     * @param {integer} l_m last modified date
     * @param {string} etag unique call indetificator
     * @return somethingCallExpression
     */
    this.mqReq = function( cb, l_m, etag ){

      var self = this;

      if( typeof token == 'undefined' ){
        throw new Error('Not authorized');
      }

      var headers = {};

      if( typeof l_m !== 'undefined'){
        headers['If-Modified-Since'] = l_m;
      }

      if( typeof etag !== 'undefined'){
        headers['If-None-Match'] = etag;
      }

      return _requestFunction( url + '/mq/req' , 'GET', headers , {id : token}, function( xhr ){
        // Restart itself, except when aborted (status == 0)
        if (xhr.status) {
          if (xhr.status == 200) {
            timeout = 0;
          } else {
            timeout += 1000;
          }
          setTimeout(function(){
            return self.mqReq( cb, xhr.getResponseHeader('Last-Modified'), xhr.getResponseHeader('Etag') );
          }, timeout);
        }

        cb( xhr );
      });
    };
    
    /**
     * Sesion logout
     * @memberof API
     * @instance
     * @method logout
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.logout = function(cb){
      return _request( {
        method   : 'GET',
        url      : '/session/logout',
        callback : cb
      } );
    };

    /**
     * Session keepalive call.
     * @memberof API
     * @instance
     * @method keepAlive
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.keepAlive = function(cb){
      return _request( {
        method   : 'GET',
        url      : '/session/keepalive',
        callback : cb
      } );
    };

    /**
     * Returns metadata for download page.
     * @memberof API
     * @instance
     * @method downloadPageMeta
     * @param {string} id download page id
     * @param {password} password password for download page, if this page under password protection
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.downloadPageMeta = function(id, password, cb){
      return _request({
        method: 'GET',
        url: '/is/download_info/' + id + preparePasswordUrl(password),
        callback: cb
      });
    };

    /**
     * Returns sended files list.
     * @memberof API
     * @instance
     * @method listFiles
     * @param {string} id download page id
     * @param {string} password for download page, if this page under password protection
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.listFiles = function(id, password, cb){
      return _request({
        method: 'GET',
        url: '/is/list_links/' + id + preparePasswordUrl(password),
        callback: cb
      });
    };

    /**
     * Returns link for download all sended files as zip archive.
     * @memberof API
     * @instance
     * @method getDownloadAllFilesLink
     * @param {string} id download page id
     * @param {string} password for download page, if this page under password protection
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.getDownloadAllFilesLink = function(id, password, cb){
      return _request({
        method: 'GET',
        url: '/is/get_download_link/' + id + preparePasswordUrl(password),
        callback: cb
      });
    };

    /**
     * Returns link for download specified sended files as zip archive.
     * @memberof API
     * @instance
     * @method getDownloadFilesLink
     * @param {string} id download page id
     * @param {array} links selected files ids
     * @param {string} password for download page, if this page under password protection
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.getDownloadFilesLink = function(id, links, password, cb){
      return _request({
        method: 'POST',
        url: '/is/get_download_link/' + id + preparePasswordUrl(password),
        data: {links: links},
        callback: cb
      });
    };

    /**
     * Login to key_request page.
     * @memberof API
     * @instance
     * @method loginKeyRequest
     * @param {string} id key_request id
     * @param {function} cb callback function
     * @return something
     */

    this.loginKeyRequest = function (id, cb) {
      // Expire token
      token = undefined;
      return _request( {
        method : 'GET',
        url : '/key_request/login/' + id,
        callback: function (xhr) {
          if (xhr.status === 200) {
            pbkdf = xhr.getResponseHeader('X-Auth-Token');
          }
          cb(xhr);
        }
      });
    };

    /**
     * Returns metadata for key_request page.
     * @memberof API
     * @instance
     * @method keyRequestMetadata
     * @param {string} id key_request id
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.keyRequestMetadata = function (id, cb) {
      return _request({
        method : 'GET',
        url : '/key_request/metadata/'+id,
        callback : cb
      });
    };

    /**
     * Sets PGP keys as default to your profile. (!)All files which was encrypted by previous keys will be unavalieble.
     * @example
     * {
     *  name: 'pgpkey',
     *  private: "",
     *  public: ""
     * }
     * @memberof API
     * @instance
     * @method sendKeys
     * @param {string} id key_request id
     * @param {array}  data PGP keys metadata
     * @param {function} cb callback function
     * @return somethingCallExpression
     */
    this.sendKeys = function (id, data, cb) {
      return _request({
        method: 'POST',
        url: '/key_request/respond/'+id,
        data: data,
        callback: cb
      });
    };

    /**
     * Returns reset/set password page metadata.
     * @memberof API
     * @instance
     * @method passwordResetMetadata
     * @param {string} id reset/set password page id
     * @param {function} cb callback function
     * @return somethingCallExpression
     */

    this.passwordResetMetadata = function(id, cb){
      return _request( {
        method   : 'GET',
        url      : '/user/reset_password_metadata/'+id,
        callback : cb
      } );
    };

    /**
     * Sets new password to account. Check 'data' example below.
     * @example
     * {
     *  password: "PR6M3ryAJC8+XvVZqggk+A==",
     *  session_key: "8LkG0mKO67+MsbRhSLr0gUYMQ2sETavseyUMkqkGxYf1yTPYX9EeiAlIAAuCpDbbxQlxyalsaTOXwSfUDNB6sz9bOzumNz+JRKxktHspS8PaDlhEHL+CGp26140TLY4kEk81OCVB7B3LnqGu3SYTehIeUrX81O8N7RA1/4RSgQ=="
     * }
     * @memberof API
     * @instance
     * @method saveResetPswd
     * @param {string} id key_request id
     * @param {array}  data information about new password
     * @param {function} cb callback function
     * @return somethingCallExpression
     */

    this.saveResetPswd = function(id, data, cb){
      return _request( {
        method   : 'POST',
        url      : '/user/reset_password/' + id,
        data     :data,
        callback : cb
      });
    };

    if ( !Crypto.nextTick ) {
      // node.js has setTime out but prefer process.nextTick
      if ( typeof process != 'undefined' &amp;&amp; typeof process.nextTick !== 'undefined' ) {
        Crypto.nextTick = process.nextTick;
      } else if ( typeof setTimeout !== 'undefined' ) {
        Crypto.nextTick = function ( callback ) {
          setTimeout( callback, 0 );
        };
      }
    }
  };
});
</code></pre>
        </article>
    </section>




    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>